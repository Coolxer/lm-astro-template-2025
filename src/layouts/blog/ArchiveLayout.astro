---
import type { Page } from "astro";

import PageLayout from "@layouts/PageLayout.astro";

import { type Meta, type Schema } from "@components/core/MySEO.astro";

import PostCard from "@components/collection/PostCard.astro";
import PagePagination from "@components/collection/PagePagination.astro";
import Categories from "@components/collection/Categories.astro";
import Button from "@components/ui/Button.astro";

import config from "@data/consts.json";


export interface Props {
  page: Page
  categories?: string[]
  pageTitle?: string;
  pageDescription?: string;
  meta: Meta
  schema?: Schema
}

const {
  page,
  categories,
pageTitle,
  pageDescription,
  meta,
  schema,
} = Astro.props
---

<PageLayout pageTitle={pageTitle} pageDescription={pageDescription}meta={meta} schema={schema}
  ><section class="px-[5%] py-16 md:py-24 lg:py-28">
    <div class="container">
       {
      page && page.data && page.data.length > 0 ? (
      <div class="flex flex-col justify-start items-center">
        <p class="mb-2 font-bold text-md">Kategorie:</p>
        <Categories baseSlug="/blog/kategoria/" categories={categories} />
        <div
          class="grid grid-cols-1 gap-x-8 gap-y-12 md:grid-cols-2 md:gap-y-16 lg:grid-cols-3"
        >
          {page.data.map((post) => <PostCard post={post} />)}
        </div>
      </div>

      <div class="flex items-center justify-center self-center my-8">
        <PagePagination baseSlug="/blog/" page={page} itemsPerPage={config.site.itemsPerPage.blog} />
      </div>): (
        <div class="flex bg-base-300 py-16  rounded-box shadow flex-col gap-4 items-center justify-center w-auto">
          <p class="text-h5">Niestety, ale nie ma jeszcze postów</p>
          <Button link="/">Wróć do strony głównej</Button>
        </div>
      )}
    </div>
  </section></PageLayout
>
